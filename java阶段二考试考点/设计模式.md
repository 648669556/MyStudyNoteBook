# 设计模式

## 7大原则

### 单一职责

单一职责原则又称单一功能原则，它规定一个类只有一个职责。如果有多个职责（功能）被设计在一个类中，这个类就违反了单一职责原则。

### 里氏替换原则

只要父类能出现的地方子类就可以出现，而且替换为子类也不会产生任何错误或异常，使用者可能根本就不需要知道是父类还是子类。

### 依赖倒置原则

- 高层模块不应该依赖低层模块，两者都应该依赖其抽象；
- 抽象不应该依赖细节；
- 细节应该依赖抽象。

### 接口隔离原则

*  接口尽量小，但是要有限度。对接口进行细化可以提高程序设计灵活性是不挣的事实，但是如果过小，则会造成接口数量过多，使设计复杂化。所以一定要适度。
* 为依赖接口的类定制服务，只暴露给调用的类它需要的方法，它不需要的方法则隐藏起来。只有专注地为一个模块提供定制服务，才能建立最小的依赖关系。
* 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。

### 合成复用原则

尽量使用聚合和合成，尽量不使用继承，使用接口或者抽象类进行。

* 第一，继承会破坏封装，子类可以看到父类的细节，违背了信息隐藏的原则
* 第二，如果父类发生了改变，也会导致子类发生了相应的改变，这直接导致了类与类之间的高度耦合性。

### 迪米特法则

通俗地讲，一个类应该对自己需要耦合或调用的类知道得最少，你（被耦合或调用的类）的内部是如何复杂都和我没关系，那是你的事情，我就知道你提供的这么多public方法，我就调用这么多，其他的我一概不关心。

### 开闭原则

软件实体（包括类、模块、功能等）应该对扩展开放，但是对修改关闭。

## 创建型

### 1.单例模式

- 1.概念：单例模式（Singleton Pattern）是 Java 中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。
这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。
- 2.作用：保证一个类仅有一个实例，并提供一个访问它的全局访问点。避免一个全局使用的类频繁地创建与销毁。
- 3.步骤：① 私有化构造函数 ② 提供一个返回唯一实例的对象函数（方法）
- 4.模式分类

	- 1.懒汉式：直到调用它返回实例的方法的时候才初始化实例对象

		- 1.懒汉式同步
		- 2.懒汉式非同步

	- 2.饿汉式：在类加载的时候就初始化实例
	- 3.双重认证锁

### 2.工厂模式

- 1.概念：工厂模式（Factory Pattern）是 Java 中最常用的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。
在工厂模式中，我们在创建对象时不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。
- 2.作用：我们明确地计划不同条件下创建不同实例时。
- 3.步骤：① 创建接口对象，提供公有的方法 ② 创建接口对应的实现类，复写对应自身接口提供方法 ③ 编写工厂类，提供公开的返回对应实现类对象的函数（方法），函数的返回值为接口类型

### 3.抽象工厂模式

- 1.概念：抽象工厂模式（Abstract Factory Pattern）是围绕一个超级工厂创建其他工厂。该超级工厂又称为其他工厂的工厂。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。
在抽象工厂模式中，接口是负责创建一个相关对象的工厂，不需要显式指定它们的类。每个生成的工厂都能按照工厂模式提供对象。
- 2.步骤：① 创建两个或两个以上的工厂模式 ② 创建抽象工厂类，返回对应工厂对象 ③ 创建工厂生产类用于返回工厂

## 结构型

### 1.适配器模式

- 1.概念：适配器模式（Adapter Pattern）是作为两个不兼容的接口之间的桥梁。这种类型的设计模式属于结构型模式，它结合了两个独立接口的功能。
这种模式涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。举个真实的例子，读卡器是作为内存卡和笔记本之间的适配器。您将内存卡插入读卡器，再将读卡器插入笔记本，这样就可以通过笔记本来读取内存卡。
- 2.步骤：菜鸟教程 设计模式 适配器模式 类图

### 2.装饰器模式

- 1.概念：装饰器模式（Decorator Pattern）允许向一个现有的对象添加新的功能，同时又不改变其结构。这种类型的设计模式属于结构型模式，它是作为现有的类的一个包装。
这种模式创建了一个装饰类，用来包装原有的类，并在保持类方法签名完整性的前提下，提供了额外的功能。
- 2.步骤：菜鸟教程 设计模式 装饰器模式 类图

### 3.代理模式

- 1.概念：在代理模式（Proxy Pattern）中，一个类代表另一个类的功能。这种类型的设计模式属于结构型模式。
在代理模式中，我们创建具有现有对象的对象，以便向外界提供功能接口。
- 2.步骤：① 创建接口对象 ② 创建被代理类和代理类 实现接口 ③ 代理类 生成我们被代理类的对象，调用被代理类对象的方法，详细见 代理模式 类图

## 行为型

### 1.迭代器模式

- 1.概念：迭代器模式（Iterator Pattern）是 Java 和 .Net 编程环境中非常常用的设计模式。这种模式用于顺序访问集合对象的元素，不需要知道集合对象的底层表示。
迭代器模式属于行为型模式。
- 2.步骤：采用内部类的方式实现了迭代器模式 具体实现参考菜鸟教程 设计模式 迭代器模式类图

### 2.观察者模式

- 1.概念：当对象间存在一对多关系时，则使用观察者模式（Observer Pattern）。比如，当一个对象被修改时，则会自动通知它的依赖对象。观察者模式属于行为型模式。
- 2.步骤：① 创建观察者的抽象父类，属性： 目标 函数：目标触发的函数
② 创建对应观察者子类继承父类，实现未实现的方法，在构造函数把自身对象添加到目标类的观察者集合当中
③ 编写目标类 属性：状态，观察者集合 函数：把观察者添加到集合的方法 触发其他观察者的行为的方法 
具体实现可以参考菜鸟教程 设计模式 观察者模式 类图

## J2EE型

### 1.MVC模式

- 1.Model：模型

	- 1.概念：模型代表一个存取数据的对象或 JAVA POJO。它也可以带有逻辑，在数据变化时更新控制器。

- 2.View：视图

	- 1.概念： 视图代表模型包含的数据的可视化。

- 3.Controller：控制器

	- 1.概念： 控制器作用于模型和视图上。它控制数据流向模型对象，并在数据变化时更新视图。它使视图与模型分离开。

*XMind - Trial Version*